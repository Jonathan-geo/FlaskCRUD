
<html>

      <head>
          <title>Aplicação CRUD</title>
          <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
          <link rel="shortcut icon" href="{{url_for('static', filename = 'logo.svg' )}}">
      </head>

      <body>


         {% include "header.html" %}

         {% block body %}

         <div class="container">
            <div class="row">
               <div class="col md-6">
                  <div>
                     <h2 class=float-left>Lista de Estudantes</h2>  
                     <button type="button" class="btn btn-success  pull-right float-right" data-toggle="modal" data-target="#myModal">Adicionar Estudantes</button>
                  </div>

                     <!-- Mensagem de sucesso na insersão de dados -->

                     {%with messages = get_flashed_messages()%}
                     {%if messages%}
                     {% for message in messages %}

                     <div class="alert alert-success alert-dismissable" role="alert">

                        <button type="button" class="close" data-dismiss="alert" aria-label ="close">
                              <span aria-hidden="true">&times;</span>
                        </button>
                           {{message}}
                     </div>

                     {%endfor%}
                     {%endif%}
                     {%endwith%}


                        <!-- TITULO DAS COLUNAS -->
               
                     <table class="table table-striped table-hover table-responsive-sm">
                        <tr>
                           <th>Identificação</th>
                           <th>Nome</th>
                           <th>Email</th>
                           <th>Telefone</th>
                        </tr>



                        {% for row in students %}
                        <tr>
                           <td>{{row.0}}</td>
                           <td>{{row.1}}</td>
                           <td>{{row.2}}</td>
                           <td>{{row.3}}</td>

                           <td>
                              <a href="/update/{{row.0}}" class="btn btn-outline-warning btn-sm" data-toggle="modal" data-target="#modaledit{{row.0}}">Editar</a>
                              <a href="/delete/{{row.0}}" class="btn btn-outline-danger btn-sm" onclick="return confirm('Are You Sure For Delete?')">Deletar</a>
                           </td>
                        </tr>
               

                                          <!-- MODAL DE UPDATE DATA -->
                  
                        <div id="modaledit{{row.0}}" class="modal fade" role="dialog">
                           <div class="modal-dialog">
                              <div class="modal-content">


                                 <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Atualizar Dados</h4>
                                 </div>


                                 <div class="modal-body">
                                    <form action="{{ url_for('update') }}" method="POST">
                                       
                                       <div class="form-group">
                                          <label>Nome:</label>
                                          <input type="hidden"  name="id" value="{{row.0}}">
                                          <input type="text" class="form-control" name="name" value="{{row.1}}">
                                       </div>

                                       <div class="form-group">
                                          <label>Email:</label>
                                          <input type="text" class="form-control" name="email" value="{{row.2}}">
                                       </div>


                                       <div class="form-group">
                                          <label>Telefone:</label>
                                          <input type="text" class="form-control" name="phone" value="{{row.3}}">
                                       </div>

                                       <div class="form-group">
                                          <button class="btn btn-primary" type="sbumit">Atualizar</button>
                                       </div>

                                    </form>
                                 </div>


                                 <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                                 </div>


                              </div>
                           </div>
                        </div>

                        {% endfor  %}

                     

                     </table>
               </div>


                              <!-- MODAL DE ISERT DATA -->

               <div id="myModal" class="modal fade" role="dialog">
                  <div class="modal-dialog">
                     <div class="modal-content">
                        
                        
                        <div class="modal-header">
                           <button type="button" class="close" data-dismiss="modal">&times;</button>
                           <h4 class="modal-title">Inserir Dados</h4>
                        </div>


                        <div class="modal-body">
                           <form action="{{ url_for('insert') }}" method="POST">
                                             
                              <div class="form-group">
                                 <label>Nome:</label>
                                 <input type="text" class="form-control" name="name" required="1">
                              </div>

                              <div class="form-group">
                                 <label>Email:</label>
                                 <input type="text" class="form-control" name="email" required="1">
                              </div>

                              <div class="form-group">
                                 <label>Telefone:</label>
                                 <input type="text" class="form-control" name="phone" required="1">
                              </div>

                              <div class="form-group">
                                 <button class="btn btn-primary" type="submit">Inserir Dados</button>
                              </div>

                           </form>
                        </div>


                        <div class="modal-footer">
                           <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                        </div>

                     </div>
                  </div>
               </div>


               
               
            </div>
         </div>
         {% include "footer.html" %}
         {% endblock %}

         <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
         <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

      </body>


</html>





